


ARM Macro Assembler    Page 1 


    1 00000000         ;;; Memory Address information found in the KL25P80M48SF
                       0RM document
    2 00000000 40048038 
                       SIM_SCGC5
                               EQU              0x40048038  ;The control for ea
                                                            ch ports Clock Gate
                                                             
    3 00000000 400FF000 
                       GPIOA_BASE
                               EQU              0x400FF000
    4 00000000 400FF040 
                       GPIOB_BASE
                               EQU              0x400FF040
    5 00000000 400FF080 
                       GPIOC_BASE
                               EQU              0x400FF080
    6 00000000 400FF0C0 
                       GPIOD_BASE
                               EQU              0x400FF0C0
    7 00000000 400FF100 
                       GPIOE_BASE
                               EQU              0x400FF100
    8 00000000         ;Base address offsets
    9 00000000 00000000 
                       GPIO_PDOR
                               EQU              0x00        ;Turn output pin on
                                                             or off
   10 00000000 00000004 
                       GPIO_PSOR
                               EQU              0x04        ;Turn output pin on
                                                            
   11 00000000 00000008 
                       GPIO_PCOR
                               EQU              0x08        ;Turn output pin of
                                                            f
   12 00000000 0000000C 
                       GPIO_PTOR
                               EQU              0x0C        ;Flip output pin
   13 00000000 00000010 
                       GPIO_PDIR
                               EQU              0x10        ;Set input pin on o
                                                            r off
   14 00000000 00000014 
                       GPIO_PDDR
                               EQU              0x14        ;Set as input or ou
                                                            tput
   15 00000000         
   16 00000000 4004A04C 
                       PORTB_PCR18
                               EQU              0x4004A04C
   17 00000000 4004A04C 
                       PORTB_PCR19
                               EQU              0x4004A04C
   18 00000000         
   19 00000000         ;;; Directives
   20 00000000                 PRESERVE8
   21 00000000                 THUMB
   22 00000000         
   23 00000000         ; Vector Table Mapped to Address 0 at Reset



ARM Macro Assembler    Page 2 


   24 00000000         ; Linker requires __Vectors to be exported
   25 00000000         
   26 00000000                 AREA             RESET, DATA, READONLY
   27 00000000                 EXPORT           __Vectors
   28 00000000         __Vectors
   29 00000000 20001000        DCD              0x20001000  ; stack pointer val
                                                            ue when stack is em
                                                            pty
   30 00000004 00000000        DCD              Reset_Handler ; reset vector
   31 00000008                 ALIGN
   32 00000008         
   33 00000008         ; The program
   34 00000008         ; Linker requires Reset_Handler
   35 00000008         
   36 00000008                 AREA             MYCODE, CODE, READONLY
   37 00000000         
   38 00000000                 ENTRY
   39 00000000                 EXPORT           Reset_Handler
   40 00000000         Reset_Handler
   41 00000000         
   42 00000000         ;REMEMBER frometf --m32 option for .srec output!
   43 00000000         
   44 00000000         ;;;;;;;;;;PROGRAM CODE STARTS HERE;;;;;;;;;;;;  
   45 00000000         main    PROC
   46 00000000 F7FF FFFE       BL               initialize
   47 00000004 F7FF FFFE       BL               changelight
   48 00000008         ;LDR r0, =0x0026E360 ; Timer 1.5M ticks, 30sec at 48mhz
   49 00000008         ;BL timerLoop
   50 00000008 E7FE    stop    B                stop
   51 0000000A         
   52 0000000A         timerLoop
   53 0000000A 1E40            subs             r0, r0, #1
   54 0000000C D1FD            BNE              timerLoop
   55 0000000E 4770            BX               LR
   56 00000010                 ENDP
   57 00000010         
   58 00000010         initialize
                               PROC
   59 00000010         ;Initialize GPIO clock pins
   60 00000010 4809            LDR              R0,=SIM_SCGC5 ;Load address of 
                                                            SIM_SCGC5 to R0  
   61 00000012 6801            LDR              R1,[R0]     ;Put value of SIM_S
                                                            CGC5 into R1  
   62 00000014 4A09            LDR              R2,=0x00003F80 ;Load value to t
                                                            urn on all port clo
                                                            cks into R2    
   63 00000016 4311            ORRS             R1,R2       ;OR R2 into R1 for 
                                                            use of masking  
   64 00000018 6001            STR              R1,[R0]     ;Put value back int
                                                            o SIM_SCGC5,   
   65 0000001A         ;This puts 0011 1110 0000 0000, binary of 3E, into the S
                       im_SCGC5 register  
   66 0000001A         ;Which turns on the port clocks A-E.
   67 0000001A         ;Initialize GPIO pins
   68 0000001A 4809            LDR              R0,=PORTB_PCR18 ;Load address o
                                                            f PORTB_PCR18 to R0
                                                             
   69 0000001C 4909            LDR              R1,=0x100   ;Load value to R1 
   70 0000001E 6001            STR              R1,[R0]     ;Put value into POR



ARM Macro Assembler    Page 3 


                                                            TB_PCR18 
   71 00000020         
   72 00000020 4807            LDR              R0,=PORTB_PCR19 ;Load address o
                                                            f PORTB_PCR19 to R0
                                                             
   73 00000022 4908            LDR              R1,=0x100   ;Load value to R1 
   74 00000024 6001            STR              R1,[R0]     ;Put value into POR
                                                            TB_PCR19 
   75 00000026         
   76 00000026         ;LDR r7, =GPIOB_BASE   ;Load base address of port B
   77 00000026 4808            LDR              r0, =0x400FF054 ;Put value of P
                                                            DDR into R0
   78 00000028 4908            LDR              R1, =0x000FFFFF ;Set Pin(s) 18,
                                                             19 set to output [
                                                            0000 0000 0000 1100
                                                             0000 0000 0000 000
                                                            0)
   79 0000002A 6001            STR              R1,[R0]     ;Put value back int
                                                            o PDDR
   80 0000002C         
   81 0000002C 4770            BX               LR
   82 0000002E                 ENDP
   83 0000002E         
   84 0000002E         changelight
                               PROC
   85 0000002E         ;LDR r7, =GPIOB_BASE  ;Load base address of port B
   86 0000002E 4808            LDR              r0, =0x400FF040 ;Put value of P
                                                            DDR into R0
   87 00000030 4908            LDR              R1, =0x00020000 
                                                            ;Turn pin(s) 18, on
                                                            
   88 00000032 6001            STR              R1, [R0]    ;Put value back int
                                                            o PDOR
   89 00000034 4770            BX               LR
   90 00000036                 ENDP
   91 00000036         
   92 00000036                 END                          ;End of program
              00 00 40048038 
              00003F80 
              4004A04C 
              00000100 
              400FF054 
              000FFFFF 
              400FF040 
              00020000 
Command Line: --debug --xref --diag_suppress=9931 --cpu=Cortex-M0+ --apcs=inter
work --depend=.\objects\main.d -o.\objects\main.o -IC:\Users\Nick\Documents\Kei
lProject\TrafficLight\RTE -IC:\Keil_v5\ARM\PACK\Keil\Kinetis_KLxx_DFP\1.7.0\Dev
ice\Include -IC:\Keil_v5\ARM\CMSIS\Include --predefine="__EVAL SETA 1" --predef
ine="__UVISION_VERSION SETA 516" --predefine="MKL25Z128xxx4 SETA 1" --list=.\li
stings\main.lst main.s



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Relocatable symbols

RESET 00000000

Symbol: RESET
   Definitions
      At line 26 in file main.s
   Uses
      None
Comment: RESET unused
__Vectors 00000000

Symbol: __Vectors
   Definitions
      At line 28 in file main.s
   Uses
      At line 27 in file main.s
Comment: __Vectors used once
2 symbols



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Relocatable symbols

MYCODE 00000000

Symbol: MYCODE
   Definitions
      At line 36 in file main.s
   Uses
      None
Comment: MYCODE unused
Reset_Handler 00000000

Symbol: Reset_Handler
   Definitions
      At line 40 in file main.s
   Uses
      At line 30 in file main.s
      At line 39 in file main.s

changelight 0000002E

Symbol: changelight
   Definitions
      At line 84 in file main.s
   Uses
      At line 47 in file main.s
Comment: changelight used once
initialize 00000010

Symbol: initialize
   Definitions
      At line 58 in file main.s
   Uses
      At line 46 in file main.s
Comment: initialize used once
main 00000000

Symbol: main
   Definitions
      At line 45 in file main.s
   Uses
      None
Comment: main unused
stop 00000008

Symbol: stop
   Definitions
      At line 50 in file main.s
   Uses
      At line 50 in file main.s
Comment: stop used once
timerLoop 0000000A

Symbol: timerLoop
   Definitions
      At line 52 in file main.s
   Uses
      At line 54 in file main.s
Comment: timerLoop used once
7 symbols



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Absolute symbols

GPIOA_BASE 400FF000

Symbol: GPIOA_BASE
   Definitions
      At line 3 in file main.s
   Uses
      None
Comment: GPIOA_BASE unused
GPIOB_BASE 400FF040

Symbol: GPIOB_BASE
   Definitions
      At line 4 in file main.s
   Uses
      None
Comment: GPIOB_BASE unused
GPIOC_BASE 400FF080

Symbol: GPIOC_BASE
   Definitions
      At line 5 in file main.s
   Uses
      None
Comment: GPIOC_BASE unused
GPIOD_BASE 400FF0C0

Symbol: GPIOD_BASE
   Definitions
      At line 6 in file main.s
   Uses
      None
Comment: GPIOD_BASE unused
GPIOE_BASE 400FF100

Symbol: GPIOE_BASE
   Definitions
      At line 7 in file main.s
   Uses
      None
Comment: GPIOE_BASE unused
GPIO_PCOR 00000008

Symbol: GPIO_PCOR
   Definitions
      At line 11 in file main.s
   Uses
      None
Comment: GPIO_PCOR unused
GPIO_PDDR 00000014

Symbol: GPIO_PDDR
   Definitions
      At line 14 in file main.s
   Uses
      None
Comment: GPIO_PDDR unused
GPIO_PDIR 00000010

Symbol: GPIO_PDIR



ARM Macro Assembler    Page 2 Alphabetic symbol ordering
Absolute symbols

   Definitions
      At line 13 in file main.s
   Uses
      None
Comment: GPIO_PDIR unused
GPIO_PDOR 00000000

Symbol: GPIO_PDOR
   Definitions
      At line 9 in file main.s
   Uses
      None
Comment: GPIO_PDOR unused
GPIO_PSOR 00000004

Symbol: GPIO_PSOR
   Definitions
      At line 10 in file main.s
   Uses
      None
Comment: GPIO_PSOR unused
GPIO_PTOR 0000000C

Symbol: GPIO_PTOR
   Definitions
      At line 12 in file main.s
   Uses
      None
Comment: GPIO_PTOR unused
PORTB_PCR18 4004A04C

Symbol: PORTB_PCR18
   Definitions
      At line 16 in file main.s
   Uses
      At line 68 in file main.s
Comment: PORTB_PCR18 used once
PORTB_PCR19 4004A04C

Symbol: PORTB_PCR19
   Definitions
      At line 17 in file main.s
   Uses
      At line 72 in file main.s
Comment: PORTB_PCR19 used once
SIM_SCGC5 40048038

Symbol: SIM_SCGC5
   Definitions
      At line 2 in file main.s
   Uses
      At line 60 in file main.s
Comment: SIM_SCGC5 used once
14 symbols
358 symbols in table
